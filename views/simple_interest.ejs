<%- include('partials/header') %>

<div class="form-card">
    <h3 class="mb-5">Simple Interest Calculator</h3>
    <div class="row g-5">
        <!-- Left Column: Inputs (এই অংশটি ঠিক আছে) -->
        <div class="col-lg-6">
            <div class="slider-container"><div class="row align-items-center"><div class="col-md-5"><label for="principalInput" class="form-label mb-0">Principal Amount</label></div><div class="col-md-7"><div class="input-group"><span class="input-group-text">₹</span><input type="number" class="form-control" id="principalInput" min="1000" max="10000000" step="1000" placeholder="e.g., 1,00,000"></div></div></div><input type="range" min="1000" max="10000000" step="1000" class="form-range mt-2" id="principalSlider"></div>
            <div class="slider-container"><div class="row align-items-center"><div class="col-md-5"><label for="rateInput" class="form-label mb-0">Annual Interest Rate</label></div><div class="col-md-7"><div class="input-group"><input type="number" class="form-control" id="rateInput" min="1" max="25" step="0.1" placeholder="e.g., 7.5"><span class="input-group-text">%</span></div></div></div><input type="range" min="1" max="25" step="0.1" class="form-range mt-2" id="rateSlider"></div>
            <div class="slider-container"><div class="row align-items-center"><div class="col-md-5"><label for="timeInput" class="form-label mb-0">Time Period</label></div><div class="col-md-7"><div class="input-group"><input type="number" class="form-control" id="timeInput" min="1" max="30" step="1" placeholder="e.g., 5"><span class="input-group-text">Years</span></div></div></div><input type="range" min="1" max="30" step="1" class="form-range mt-2" id="timeSlider"></div>
        </div>

        <!-- Right Column: Results (এই অংশটি ঠিক আছে) -->
        <div class="col-lg-6 d-flex flex-column">
            <div id="initialState" class="d-flex flex-grow-1 align-items-center justify-content-center h-100 text-center text-muted p-4" style="background-color: #f8f9fa; border-radius: 12px;"><h4>Enter your investment details to see the calculation.</h4></div>
            <div id="resultsState" class="flex-grow-1" style="display: none;"><div class="row h-100 align-items-center"><div class="col-md-7"><div class="emi-summary-card"><div class="summary-item"><div><span class="dot" style="background-color: #0d6efd;"></span><span class="label">Principal Amount</span></div><div class="value" id="totalPrincipal">₹0</div></div><div class="summary-item"><div><span class="dot" style="background-color: #198754;"></span><span class="label">Total Interest</span></div><div class="value" id="totalInterest">₹0</div></div><hr><div class="summary-item fw-bold"><div class="label">Total Maturity Value</div><div class="value fs-4" id="totalMaturityValue">₹0</div></div></div></div><div class="col-md-5 d-flex align-items-center justify-content-center"><canvas id="siPieChart"></canvas></div></div></div>
        </div>
    </div>
    
    <!-- Yearly Breakdown -->
    <div id="yearlyBreakdownSection" class="mt-5" style="display: none;">
        <h4 class="text-center mb-4">Year-by-Year Breakdown</h4>
        <div class="table-responsive"><table class="table table-striped table-bordered text-center"><thead class="table-dark"><tr><th>Year</th><th>Interest Earned (for the year)</th><th>End of Year Balance</th></tr></thead><tbody id="yearlyBreakdownBody"></tbody></table></div>
    </div>

    <!-- তথ্য সেকশন (চূড়ান্তভাবে পরিবর্তিত) -->
    <div class="info-accordion">
        <div class="accordion" id="calculatorInfoAccordion">
            <!-- Item 1: How to Use -->
            <div class="accordion-item"><h2 class="accordion-header" id="headingOne"><button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">How to Use This Calculator</button></h2><div id="collapseOne" class="accordion-collapse collapse show" aria-labelledby="headingOne" data-bs-parent="#calculatorInfoAccordion"><div class="accordion-body"><ol><li><strong>Enter Principal Amount:</strong> Use the slider or input box to set the initial amount of money.</li><li><strong>Set Annual Interest Rate:</strong> Input the rate of interest per year.</li><li><strong>Define Time Period:</strong> Choose the duration for which the money is invested or borrowed, in years.</li><li><strong>Analyze in Real-Time:</strong> The calculator will instantly show the total interest earned, the final maturity value, and a year-by-year breakdown.</li></ol></div></div></div>
            
            <!-- Item 2: Understanding the Metrics -->
            <div class="accordion-item"><h2 class="accordion-header" id="headingTwo"><button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">Understanding the Metrics</button></h2><div id="collapseTwo" class="accordion-collapse collapse" aria-labelledby="headingTwo" data-bs-parent="#calculatorInfoAccordion"><div class="accordion-body"><p><strong>Principal Amount:</strong> This is the initial sum of money that was invested or borrowed. It is the base on which the interest is calculated.</p><p><strong>Total Interest:</strong> This is the total extra money earned (on an investment) or paid (on a loan) over the entire period. In simple interest, this amount is the same for each year.</p><p><strong>Total Maturity Value:</strong> This is the final amount at the end of the period, which is the sum of the Principal Amount and the Total Interest.</p></div></div></div>
            
            <!-- ### নতুন: বিস্তারিত গাইড ### -->
            <div class="accordion-item">
                <h2 class="accordion-header" id="headingThree">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
                        A Detailed Guide to Simple Interest
                    </button>
                </h2>
                <div id="collapseThree" class="accordion-collapse collapse" aria-labelledby="headingThree" data-bs-parent="#calculatorInfoAccordion">
                    <div class="accordion-body">
                        <p class="lead">Simple Interest is the most basic and straightforward method of calculating interest on a sum of money. Understanding it is the first step to mastering more complex financial concepts.</p>
                        <hr>
                        <h4>What is Simple Interest?</h4>
                        <p>Simple interest is calculated only on the original principal amount. Unlike compound interest, you do not earn interest on the interest that has already been accumulated. This means you earn the exact same amount of interest every year.</p>
                        
                        <h4>The Formula for Simple Interest</h4>
                        <p>The calculation is very straightforward:</p>
                        <blockquote class="blockquote bg-light p-3 rounded">
                            <code>Simple Interest (SI) = (P × R × T) / 100</code>
                        </blockquote>
                        <ul>
                            <li><strong>P</strong> = Principal Amount (the initial sum)</li>
                            <li><strong>R</strong> = Annual Interest Rate (in %)</li>
                            <li><strong>T</strong> = Time Period (in years)</li>
                        </ul>

                        <h4>Key Difference: Simple vs. Compound Interest</h4>
                        <p>This is the most crucial distinction in personal finance:</p>
                        <ul>
                            <li><strong>Simple Interest:</strong> Grows linearly. You earn interest only on your initial investment. Best for short-term loans or deposits.</li>
                            <li><strong><a href="/compound-interest">Compound Interest</a>:</strong> Grows exponentially. You earn interest on your initial investment AND on the accumulated interest. This "interest on interest" effect is the key to long-term wealth creation.</li>
                        </ul>
                        
                        <h4>Where is Simple Interest Used?</h4>
                        <p>While less common for long-term investments, simple interest is still used in various financial products, including:</p>
                        <ul>
                            <li>Some short-term personal loans or car loans.</li>
                            <li>Certain types of Fixed Deposits where the interest is paid out regularly instead of being reinvested.</li>
                            <li>Retailer financing for consumer goods.</li>
                        </ul>

                        <h4>Advantages and Disadvantages</h4>
                        <p><strong>Advantages:</strong></p>
                        <ol>
                            <li><strong>Easy to Calculate:</strong> The formula is simple and transparent.</li>
                            <li><strong>Predictable:</strong> The interest amount is constant for each period.</li>
                            <li><strong>Beneficial for Borrowers:</strong> If you are taking a loan, simple interest is cheaper than compound interest because the interest doesn't grow.</li>
                        </ol>
                        <p><strong>Disadvantages:</strong></p>
                        <ol>
                            <li><strong>Lower Returns for Investors:</strong> It does not harness the power of compounding, leading to significantly lower returns over the long term.</li>
                            <li><strong>Doesn't Account for Inflation:</strong> Over time, the real value of your returns can be eroded by inflation.</li>
                        </ol>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- JavaScript (এই অংশটি ঠিক আছে) -->
<script>
    document.addEventListener('DOMContentLoaded', () => {
        const principalSlider = document.getElementById('principalSlider'), rateSlider = document.getElementById('rateSlider'), timeSlider = document.getElementById('timeSlider');
        const principalInput = document.getElementById('principalInput'), rateInput = document.getElementById('rateInput'), timeInput = document.getElementById('timeInput');
        const initialState = document.getElementById('initialState'), resultsState = document.getElementById('resultsState'), yearlyBreakdownSection = document.getElementById('yearlyBreakdownSection');
        const totalPrincipal = document.getElementById('totalPrincipal'), totalInterest = document.getElementById('totalInterest'), totalMaturityValue = document.getElementById('totalMaturityValue');
        const yearlyBreakdownBody = document.getElementById('yearlyBreakdownBody'), pieChartCanvas = document.getElementById('siPieChart');
        let siPieChart;
        const formatCurrency = (num) => new Intl.NumberFormat('en-IN', { style: 'currency', currency: 'INR', minimumFractionDigits: 0, maximumFractionDigits: 0 }).format(num);
        function calculateAndDisplay() {
            const P = parseFloat(principalInput.value); const R = parseFloat(rateInput.value); const T = parseFloat(timeInput.value);
            if (isNaN(P) || isNaN(R) || isNaN(T) || P <= 0 || R < 0 || T <= 0) {
                initialState.style.display = 'flex'; resultsState.style.display = 'none'; yearlyBreakdownSection.style.display = 'none';
                if (siPieChart) siPieChart.destroy(); return;
            }
            initialState.style.display = 'none'; resultsState.style.display = 'block'; yearlyBreakdownSection.style.display = 'block';
            const simpleInterestTotal = (P * R * T) / 100; const totalAmount = P + simpleInterestTotal;
            totalPrincipal.textContent = formatCurrency(P); totalInterest.textContent = formatCurrency(simpleInterestTotal); totalMaturityValue.textContent = formatCurrency(totalAmount);
            if (siPieChart) siPieChart.destroy();
            siPieChart = new Chart(pieChartCanvas, { type: 'doughnut', data: { labels: ['Principal Amount', 'Total Interest'], datasets: [{ data: [P, simpleInterestTotal], backgroundColor: ['#0d6efd', '#198754'], borderWidth: 0 }] }, options: { responsive: true, maintainAspectRatio: true, plugins: { legend: { display: false } } } });
            yearlyBreakdownBody.innerHTML = ''; const interestPerYear = (P * R) / 100;
            for (let year = 1; year <= T; year++) {
                const endOfYearBalance = P + (interestPerYear * year);
                const row = `<tr><td>${year}</td><td>${formatCurrency(interestPerYear)}</td><td>${formatCurrency(endOfYearBalance)}</td></tr>`;
                yearlyBreakdownBody.innerHTML += row;
            }
        }
        function syncAndCalculate(source, target) { target.value = source.value; calculateAndDisplay(); }
        principalSlider.addEventListener('input', () => syncAndCalculate(principalSlider, principalInput));
        principalInput.addEventListener('input', () => syncAndCalculate(principalInput, principalSlider));
        rateSlider.addEventListener('input', () => syncAndCalculate(rateSlider, rateInput));
        rateInput.addEventListener('input', () => syncAndCalculate(rateInput, rateSlider));
        timeSlider.addEventListener('input', () => syncAndCalculate(timeSlider, timeInput));
        timeInput.addEventListener('input', () => syncAndCalculate(timeInput, timeSlider));
        calculateAndDisplay();
    });
</script>

<%- include('partials/footer') %>